<div class="file-content-panel">
  <!-- Breadcrumb -->
  @if (breadcrumbs.length > 0) {
    <div class="breadcrumb-bar">
      <div class="breadcrumb-path" aria-label="Breadcrumb">
        <span class="breadcrumb-item" *ngFor="let crumb of breadcrumbs; let last = last">
          <i class="pi pi-angle-right" *ngIf="!last"></i>
          {{ crumb ?? '—' }}
        </span>
      </div>

      @if (selectedFile) {
        <div class="file-actions">
          <p-button
            icon="pi pi-copy"
            styleClass="p-button-text p-button-sm"
            (onClick)="copy.emit(fileContent)"
            pTooltip="Copy file to clipboard"
            tooltipPosition="bottom"
          ></p-button>
          <p-button
            icon="pi pi-download"
            styleClass="p-button-text p-button-sm"
            (onClick)="download.emit()"
            pTooltip="Download file"
            tooltipPosition="bottom"
          ></p-button>
        </div>
      }
    </div>
  }

  <!-- File Viewer -->
  @if (selectedFile) {
    <div class="file-viewer">
      <div class="file-info-bar">
        <div class="file-meta">
          <i [class]="getFileIconClassFn(selectedFile.name)"></i>
          <span class="file-name">{{ selectedFile.name }}</span>
          <span class="file-size">{{ formatFileSizeFn(selectedFile.size) }}</span>
        </div>
      </div>

      <div class="code-container">
        @if (loadingFile) {
          <p-progressSpinner strokeWidth="3"></p-progressSpinner>
        } @else {
          <!-- (No syntax highlight — pre/code like GitHub simple view) -->
          <pre class="code-block"><code>{{ fileContent }}</code></pre>
        }
      </div>
    </div>
  }

  <!-- Empty State -->
  @if (!selectedFile && !loadingFile && !error) {
    <div class="empty-state">
      <i class="pi pi-file-o" style="font-size: 3rem; color: #8b949e;"></i>
      <h3>Select a file to view</h3>
      <p>Choose a file from the tree to view its contents</p>
      <p-message severity="info" text="Tip: use the file tree filter to find files quickly."></p-message>
    </div>
  }

  <!-- Error State -->
  @if (error) {
    <div class="error-state">
      <i class="pi pi-exclamation-triangle" style="font-size: 3rem; color: #f85149;"></i>
      <h3>Error</h3>
      <p>{{ error }}</p>
      <p-button label="Retry" icon="pi pi-refresh" (onClick)="retry.emit()"></p-button>
      <p-message severity="error" [text]="error"></p-message>
    </div>
  }
</div>
